<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                template="/WEB-INF/facelets/layout/compliance-template-ebi.xhtml">



    <!-- Mandatorty params -->
    <ui:param name="sectionTitle" value="Resources"/>



    <ui:define name="content">
        <h:outputScript>
            $(document).ready(function () {

                $.ajax({
                    type: "GET",
                    url: "http://www.ebi.ac.uk/~intact/site/training/training.xml",
                    datatype: "xml",
                    crossDomain: true,
                    headers: {
                        'Access-Control-Allow-Origin': '*'
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log('Error: ' + errorThrown);
                    },
                    success: function (xml) {
                        console.log('AJAX Request is succeeded.');

                        var f2ftrningrenderer = '';
                        var onlinetraining_renderer = '';
                        var currentDate = new Date();
                        var currentMonth = currentDate.getMonth();
                        var currenyYear=currentDate.getFullYear();
                        var month = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

                        $(xml).find('facetofacetraining').each(function () {

                            var monthNumber = parseInt(($(this).find('month').text()));
                            var yearNumber = parseInt(($(this).find('year').text()));
                            currentMonth+=1;
                            if (currenyYear&lt; yearNumber|| ((currenyYear==yearNumber)&amp;&amp;((currentMonth)&lt;=monthNumber))){
                            f2ftrningrenderer += '&lt;h6&gt;';
                            f2ftrningrenderer += month[monthNumber - 1];
                            f2ftrningrenderer += ' ' + $(this).find('year').text();
                            f2ftrningrenderer += '&lt;/h6&gt;';
                            f2ftrningrenderer += '&lt;ul&gt;';

                            $(this).find('training').each(function () {

                                var end_training_date_txt = $(this).find('enddate').text();
                                var end_training_date = new Date(end_training_date_txt);

                                if (currentDate.getTime() &lt;= end_training_date.getTime()) {

                                    f2ftrningrenderer += '&lt;li&gt;&lt;h5&gt;';
                                    f2ftrningrenderer += '&lt;a class="external" ';
                                    f2ftrningrenderer += 'href="';
                                    f2ftrningrenderer += $(this).find('url').text();
                                    f2ftrningrenderer += '" ';
                                    f2ftrningrenderer += 'target="_blank" ';
                                    f2ftrningrenderer += '&gt;';
                                    f2ftrningrenderer += $(this).find('name').text();
                                    f2ftrningrenderer += '&lt;/a&gt;';
                                    f2ftrningrenderer += '&lt;/h5&gt;&lt;/li&gt;';
                                }
                            });

                            f2ftrningrenderer += '&lt;/ul&gt;';
                        }
                    });
                $(f2ftrningrenderer).insertAfter("#f2ftraining");
                
                $(xml).find('onlinetraining').each(function () {
                    onlinetraining_renderer += '&lt;section  class="grid_24"&gt;';
                    onlinetraining_renderer += '&lt;h4&gt;';
                    onlinetraining_renderer += $(this).children('name').text();
                    onlinetraining_renderer += '&lt;/h4&gt;';
                    onlinetraining_renderer += '&lt;ul&gt;';
                    $(this).find('otraining').each(function () {
                        onlinetraining_renderer += '&lt;li&gt;&lt;h5&gt;';
                        onlinetraining_renderer += '&lt;a class="external" ';
                        onlinetraining_renderer += 'href="';
                        onlinetraining_renderer += $(this).find('url').text();
                        onlinetraining_renderer += '" ';
                        onlinetraining_renderer += 'target="_blank" ';
                        onlinetraining_renderer += '&gt;';
                        onlinetraining_renderer += $(this).find('name').text();
                        onlinetraining_renderer += '&lt;/a&gt;';

                        onlinetraining_renderer += '&lt;/h5&gt;&lt;/li&gt;';

                    });

                    onlinetraining_renderer += '&lt;/ul&gt;';
                    onlinetraining_renderer += '&lt;/section&gt;';
                });

                $(onlinetraining_renderer).insertAfter("#onlinetraining");


            }
            })
            ;
            })
            ;
        </h:outputScript>
        <!--<h:outputScript target="body" src="#{requestConfigBean.absoluteContextPath}/resources/javascript/training.js"></h:outputScript>-->
        <h2>Training</h2>
        <section class="grid_18 alpha">
            <section class="grid_12">
                <h3 id='f2ftraining' class="icon icon-generic" data-icon="f">Face-To-Face Training</h3>
                <!--<h6>November 2015</h6>
                <ul>
                    <li>
                        <h5>
                            <a class="external"
                               href="http://www.ebi.ac.uk/training/events/2015/interactions-pathways-intact"
                               target="_blank">Interactions &amp; Pathways - IntAct</a>
                        </h5>
                    </li>
                    <li>
                        <h5>
                            <a class="external" href="http://www.ebi.ac.uk/training/events/2015/networks-and-pathways-0"
                               target="_blank">Networks and Pathways</a>
                        </h5>
                    </li>
                    <li>
                        <h5>
                            <a class="external"
                               href="http://www.ebi.ac.uk/training/events/2015/network-analysis-cytoscape-and-psicquic"
                               target="_blank">Network Analysis with Cytoscape and PSICQUIC</a>
                        </h5>
                    </li>
                </ul>
                <h6>May 2016</h6>
                <ul>
                    <li>
                        <h5>
                            <a class="external" href="http://www.ebi.ac.uk/training/events/2016/networks-and-pathways-1"
                               target="_blank">Networks and Pathways</a>
                        </h5>
                    </li>
                </ul>
                <h6>July 2016</h6>
                <ul>
                    <li>
                        <h5>
                            <a class="external" href="http://www.ebi.ac.uk/training/events/2016/silico-systems-biology"
                               target="_blank">In Silico Systems Biology</a>
                        </h5>
                    </li>
                </ul>-->
            </section>
            <section class="grid_12">
                <h3 id="onlinetraining" class="icon icon-generic" data-icon="T">Online Training</h3>
                <!--<section  class="grid_24">
                    <h4>IntAct</h4>
                    <ul>
                        <li>
                            <h5>
                                <a class="external"
                                   href="http://www.ebi.ac.uk/training/online/course/intact-molecular-interactions-database-embl-ebi-we"
                                   target="_blank">IntAct: the molecular interactions database at EMBL-EBI (webinar)</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a class="external"
                                   href="http://www.ebi.ac.uk/training/online/course/intact-molecular-interactions-ebi"
                                   target="_blank">IntAct: Molecular Interactions at the EBI</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a class="external"
                                   href="http://www.ebi.ac.uk/training/online/course/protein-interactions-and-their-importance"
                                   target="_blank">Protein interactions and their importance</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a class="external" href="http://www.ebi.ac.uk/training/online/course/intact-quick-tour"
                                   target="_blank">IntAct: Quick tour</a>
                            </h5>
                        </li>
                        <li>
                            <h5>
                                <a class="external"
                                   href="http://www.ebi.ac.uk/training/online/course/proteomics-introduction-ebi-resources"
                                   target="_blank">Proteomics: an introduction to the EBI resources</a>
                            </h5>
                        </li>
                    </ul>
                </section>
                <section class="grid_24">
                    <h4>Complex Portal</h4>
                    <ul>
                        <li>
                            <h5>
                                <a class="external"
                                   href="http://www.ebi.ac.uk/training/online/course/complex-portal-quick-tour"
                                   target="_blank">Complex Portal: Quick tour</a>
                            </h5>

                        </li>
                        <li>
                            <h5>
                                <a class="external"
                                   href="http://www.ebi.ac.uk/training/online/course/complex-portal-webinar"
                                   target="_blank">Complex Portal: webinar</a>
                            </h5>

                        </li>
                    </ul>
                </section>-->
            </section>
        </section>
        <section>
            <ui:include src="resources_menu.xhtml"/>
        </section>
    </ui:define>
</ui:composition>